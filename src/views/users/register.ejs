<%- include('../partials/head') %>
<%- include('../partials/header') %>

<div class="container register-form">
  <h4>Registro de Usuario</h4>

  <!-- Formulario de registro -->
  <form action="/users/register" method="POST" enctype="multipart/form-data">
    <div class="form-group">
      <label for="firstName">Nombre:</label>
      <input 
        type="text" 
        name="firstName" 
        id="firstName" 
        placeholder="Ingrese su nombre" 
        value="<%= oldData ? oldData.firstName : '' %>"
        required>
      <% if (errors && errors.find(err => err.param === 'firstName')) { %>
        <p class="error" style="color: red;"><%= errors.find(err => err.param === 'firstName').msg %></p>
      <% } %>
    </div>

    <div class="form-group">
      <label for="lastName">Apellido:</label>
      <input 
        type="text" 
        name="lastName" 
        id="lastName" 
        placeholder="Ingrese su apellido" 
        value="<%= oldData ? oldData.lastName : '' %>"
        required>
      <% if (errors && errors.find(err => err.param === 'lastName')) { %>
        <p class="error" style="color: red;"><%= errors.find(err => err.param === 'lastName').msg %></p>
      <% } %>
    </div>

    <div class="form-group">
      <label for="email">Correo electrónico:</label>
      <input 
        type="email" 
        name="email" 
        id="email" 
        placeholder="Ingrese su correo" 
        value="<%= oldData ? oldData.email : '' %>"
        required>
      <% if (errors && errors.find(err => err.param === 'email')) { %>
        <p class="error" style="color: red;"><%= errors.find(err => err.param === 'email').msg %></p>
      <% } %>
    </div>

    <div class="form-group">
      <label for="password">Contraseña:</label>
      <input 
        type="password" 
        name="password" 
        id="password" 
        placeholder="Ingrese su contraseña" 
        required>
      <% if (errors && errors.find(err => err.param === 'password')) { %>
        <p class="error" style="color: red;"><%= errors.find(err => err.param === 'password').msg %></p>
      <% } %>
    </div>

    <div class="form-group">
      <label for="profileImage">Imagen de perfil:</label>
      <input type="file" name="profileImage" id="profileImage" accept="image/*">
      <% if (errors && errors.find(err => err.param === 'profileImage')) { %>
        <p class="error" style="color: red;"><%= errors.find(err => err.param === 'profileImage').msg %></p>
      <% } %>
    </div>

    <button type="submit" class="btn btn-primary">Registrarse</button>
  </form>
</div>

<%- include('../partials/footer') %>
